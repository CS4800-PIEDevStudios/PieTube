import{r as o,u as w,j as e,L as d}from"./index-Dn26kxWp.js";import{a as n}from"./axiosConfig-9NAMRaJi.js";import{F as r,I as g,a as h}from"./InputGroup-CSwBanFT.js";import"./ThemeProvider-C1ViMUqc.js";import"./index-C2v9Gm8d.js";const L=()=>{const[i,u]=o.useState(""),[l,p]=o.useState(""),[m,c]=o.useState(""),x=w();o.useEffect(()=>{console.log(localStorage.getItem("isLoggedIn")),localStorage.getItem("isLoggedIn")==="true"&&x("/Profile")},[]);const b=t=>{u(t.target.value)},j=t=>{p(t.target.value)},S=async t=>{t.preventDefault();try{await n.get("login-api/checkAuth").then(s=>{console.log("CSRF Token Set, Authenticated:",s.data),console.log("COOKIE",s)});const a=await n.post("login-api/loginAccount",{withCredentials:!0,username:i,password:l});c("Account Login Successful"),console.log("Response from Django:",a.data),a.data.status==="success"&&(n.get("login-api/checkAuth").then(s=>{console.log("CSRF Token Set, Authenticated:",s.data)}),localStorage.setItem("isLoggedIn",!0),window.location.href="/")}catch(a){c("Something went wrong."),console.error("Error sending data to Django:",a)}};return e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{class:"p-5 bg-light mb-5",style:{borderRadius:"20px",boxShadow:"0px 0px 30px rgba(0, 0, 0, 0.25)",minWidth:"500px",minHeight:"500px"},children:[e.jsx("h1",{children:"Sign in"}),e.jsxs("div",{class:"text-left",children:[e.jsx(r.Label,{htmlFor:"basic-url",children:"Enter Username"}),e.jsx(g,{className:"mb-3",children:e.jsx(r.Control,{type:"text",value:i,onChange:b,placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon2"})}),e.jsx("p",{children:"Enter Password"}),e.jsx(g,{children:e.jsx(r.Control,{type:"password",value:l,onChange:j,placeholder:"Password","aria-label":"Password","aria-describedby":"basic-addon2"})}),e.jsx(d,{to:"/Changepassword",children:e.jsx(h,{variant:"link",children:" Forgot password? "})}),e.jsx("button",{class:"custom-btn mt-4",type:"submit",children:"Submit"}),e.jsx(d,{to:"/Signup",children:e.jsx(h,{variant:"link",children:" Don't have an account? "})})]})]}),e.jsx("div",{children:m})]})};export{L as default};
