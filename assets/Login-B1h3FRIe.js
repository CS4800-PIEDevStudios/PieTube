import{r as l,j as e,u as w,L as b}from"./index-BA4YbVE_.js";import{a as p}from"./axiosConfig-DdpKQLmW.js";import{F as x,I as j}from"./InputGroup-BqWJ1-ud.js";import{u as S,c as v}from"./ThemeProvider-GXUM-pWc.js";import{u as y}from"./Button-B_VyNPV0.js";import"./index-C6VntaJj.js";const f=l.forwardRef(({as:c,bsPrefix:u,variant:n="primary",size:d,active:g=!1,disabled:s=!1,className:h,...r},m)=>{const i=S(u,"btn"),[t,{tagName:a}]=y({tagName:c,disabled:s,...r}),o=a;return e.jsx(o,{...t,...r,ref:m,disabled:s,className:v(h,i,g&&"active",n&&`${i}-${n}`,d&&`${i}-${d}`,r.href&&s&&"disabled")})});f.displayName="Button";const N=()=>{const[c,u]=l.useState(""),[n,d]=l.useState(""),[g,s]=l.useState(""),h=w();l.useEffect(()=>{console.log(localStorage.getItem("isLoggedIn")),localStorage.getItem("isLoggedIn")==="true"&&h("/Profile")},[]);const r=t=>{u(t.target.value)},m=t=>{d(t.target.value)},i=async t=>{t.preventDefault();try{await p.get("login-api/checkAuth").then(o=>{console.log("CSRF Token Set, Authenticated:",o.data),console.log("COOKIE",o)});const a=await p.post("login-api/loginAccount",{withCredentials:!0,username:c,password:n});s("Account Login Successful"),console.log("Response from Django:",a.data),a.data.status==="success"&&(p.get("login-api/checkAuth").then(o=>{console.log("CSRF Token Set, Authenticated:",o.data)}),localStorage.setItem("isLoggedIn",!0),window.location.href="/PieTube/")}catch(a){s("Something went wrong."),console.error("Error sending data to Django:",a)}};return e.jsx("form",{onSubmit:i,children:e.jsxs("div",{children:[e.jsxs("div",{class:"p-5 bg-light",style:{borderRadius:"20px",boxShadow:"0px 0px 30px rgba(0, 0, 0, 0.25)",minWidth:"500px",minHeight:"500px"},children:[e.jsx("h1",{children:"Sign in"}),e.jsxs("div",{class:"text-left",children:[e.jsx(x.Label,{htmlFor:"basic-url",children:"Enter Username"}),e.jsx(j,{className:"mb-3",children:e.jsx(x.Control,{type:"text",value:c,onChange:r,placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon2"})}),e.jsx("p",{children:"Enter Password"}),e.jsx(j,{children:e.jsx(x.Control,{type:"password",value:n,onChange:m,placeholder:"Password","aria-label":"Password","aria-describedby":"basic-addon2"})}),e.jsx(b,{to:"/Changepassword",children:e.jsx(f,{variant:"link",children:" Forgot password? "})}),e.jsx("button",{class:"custom-btn mt-4",type:"submit",children:"Submit"}),e.jsx(b,{to:"/Signup",children:e.jsx(f,{variant:"link",children:" Don't have an account? "})})]})]}),e.jsx("div",{children:g})]})})};export{N as default};
